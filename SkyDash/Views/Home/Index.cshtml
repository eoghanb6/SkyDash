@model SkyDash.ViewModels.VmViewModel


<h1 class="authenticate">@ViewBag.response</h1>

@foreach (var account in Model.accounts)
{
    <h2 class="account-name">@account.name</h2>
    <div class="div-spacing">
        @foreach (var vm in Model.accountVms)
        { 
            <div id="DialogBox" title="Dialog Box">
                <h3>Backups</h3>
                
            </div>

            if (vm.AccountId == account.id)
            {
                <div class="col-md-2">
                     @if (vm.LastBackupStatus == "Successful")
                     {
                        <div class="panel-body-success">
                            <ul class="no-bullet center">
                                <li class="vm-name">@vm.Name</li>
                                <li>@vm.LastBackup.Replace("Completed on the night of:", "")</li>
                            </ul>
                            <button id="btnDialog" type="button">Open Dialog</button>
                        </div>

                     }
                     else if (vm.LastBackupStatus == "Failed")
                     {
                        <div class="panel-body-fail">
                            <ul class="no-bullet center">
                                <li class="vm-name">@vm.Name</li>
                                <li>@vm.LastBackup.Replace("Completed on the night of:", "")</li>
                            </ul>
                        </div>
                     }
                     else
                     {
                        <div class="panel-body-excluded">
                            <ul class="no-bullet center">
                                <li class="vm-name">@vm.Name</li>
                                <li>@vm.LastBackup</li>
                            </ul>x
                        </div>
                     } 
                </div>
            }
        }
    </div>
}

<script type="text/javascript">
        $(document).ready(function () {
            $('#DialogBox').dialog({
                autoOpen: false,
                modal: false,
                width: 300,
                height: 300,
                show: {
                    effect: "blind",
                    duration: 100
                },
                hide: {
                    effect: "explode",
                    duration: 10000
                }
            });

            $('#btnDialog').click(function () {
                $('#DialogBox').dialog("open");

            });
        });
</script>
